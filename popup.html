<!doctype html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="color-scheme" content="dark light">
  <meta http-equiv="Content-Security-Policy"
    content="default-src 'self'; style-src 'self' 'unsafe-inline'; script-src 'self';">
  <title>Support Toolkit</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="container">

    <div class="top-actions">
      <button id="copyDailyReport" class="primary">
        <span class="daily-header">
          <span class="daily-left">
            <span class="daily-emoji" aria-hidden="true">ğŸ“…</span>
            <span class="daily-text-group">
              <span id="dailyReportTitle" class="daily-title">Daily Report</span>
            </span>
          </span>
          <span class="daily-right">
            <br>
            <span class="daily-shortcut-badge" id="shortcut-daily"></span>
            <span class="daily-copy-icon" aria-label="Copy">
              <span class="copy-symbol">â§‰</span>
              <span class="check-symbol">âœ“</span>
            </span>
          </span>
        </span>
      </button>
    </div>

    <div class="tabs">
      <div class="tab active" data-tab="urls">ğŸ”— Open LP URLs</div>
      <div class="tab" data-tab="grafana">ğŸ“Š Grafana â†’ Daily Report</div>
    </div>

    <div class="tab-content active" id="urls-content">
      <h3><span class="icon">ğŸ”—</span> Open & Group LP URLs</h3>
      <p class="subtitle">Click "Read clipboard" or paste your table text below. Duplicates are automatically removed.
      </p>

      <div class="row">
        <button id="readUrlClip">ğŸ“‹ Read clipboard</button>
        <label><input type="checkbox" id="useDelay"><span>1s delay between tabs</span></label>
      </div>

      <textarea id="urlInput" placeholder="Paste your table text with URLs hereâ€¦"></textarea>
      <div id="urlCounts"></div>
      <div id="urlPreview"></div>

      <div class="actions">
        <button id="runUrls" class="primary grow">
          ğŸš€ Open & group as "Failed LP"
          <span class="keyboard-hint" id="shortcut-urls"></span>
        </button>
        <button id="stopOpen" class="danger" style="display:none;">â¹ Stop</button>
      </div>

      <div id="urlStatus"></div>
    </div>

    <div class="tab-content" id="grafana-content">
      <h3><span class="icon">ğŸ“Š</span> Grafana â†’ Daily Report <span class="badge">Docs/Sheets</span></h3>
      <p class="subtitle">Paste your Grafana table text below to generate a clean, ready-to-copy report (HTML or TSV)
      </p>

      <div class="row">
        <button id="readGrafanaClip">ğŸ“‹ Read clipboard</button>
      </div>

      <textarea id="grafanaInput" placeholder="Paste your Grafana table text hereâ€¦"></textarea>

      <div class="actions">
        <button id="formatGrafana" class="primary grow">
          âœ¨ Format Company Batch Counts
          <span class="keyboard-hint" id="shortcut-batch"></span>
        </button>
      </div>

      <div class="actions">
        <button id="formatGrafana3" class="primary grow">
          âœ¨ Format Media Player Errors
          <span class="keyboard-hint" id="shortcut-errors"></span>
        </button>
      </div>

      <div id="tsvStatus"></div>
    </div>
  </div>

  <div class="credit">
    Just a little something from
    <a href="https://www.linkedin.com/in/elirang/" target="_blank" rel="noopener noreferrer">Eliran</a> |
    <a href="https://github.com/elirangor/support-toolkit" target="_blank" rel="noopener noreferrer">View on GitHub</a>
  </div>

  <script type="module" src="popup.js"></script>

</body>

</html>